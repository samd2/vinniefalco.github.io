<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>File</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../../index.html" title="NuDB">
<link rel="up" href="../ref.html" title="Reference">
<link rel="prev" href="../ref.html" title="Reference">
<link rel="next" href="Hasher.html" title="Hasher">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="NuDB Logo" width="1270" height="80" src="../../images/logo.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../ref.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../ref.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="Hasher.html"><img src="../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="nudb.ref.File"></a><a class="link" href="File.html" title="File">File</a>
</h3></div></div></div>
<p>
        The <span class="bold"><strong>File</strong></span> concept abstracts access to files
        in the underlying file system.
      </p>
<p>
        To support interfaces other than Win32 or POSIX, callers may provide their
        own <span class="bold"><strong>File</strong></span> type that meets these requirements.
      </p>
<h5>
<a name="nudb.ref.File.h0"></a>
        <span class="phrase"><a name="nudb.ref.File.associated_types"></a></span><a class="link" href="File.html#nudb.ref.File.associated_types">Associated
        Types</a>
      </h5>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
            <a class="link" href="nudb__path_type.html" title="path_type">path_type</a>
          </li>
<li class="listitem">
            <a class="link" href="nudb__file_mode.html" title="file_mode">file_mode</a>
          </li>
<li class="listitem">
            <a class="link" href="nudb__error_code.html" title="error_code">error_code</a>
          </li>
</ul></div>
<h5>
<a name="nudb.ref.File.h1"></a>
        <span class="phrase"><a name="nudb.ref.File.notation"></a></span><a class="link" href="File.html#nudb.ref.File.notation">Notation</a>
      </h5>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
            <code class="computeroutput"><span class="identifier">F</span></code> a <span class="bold"><strong>File</strong></span>
            type
          </li>
<li class="listitem">
            <code class="computeroutput"><span class="identifier">f</span></code> an instance of type
            F
          </li>
<li class="listitem">
            <code class="computeroutput"><span class="identifier">p</span></code> an instance of type
            <a class="link" href="nudb__path_type.html" title="path_type">path_type</a>
          </li>
<li class="listitem">
            <code class="computeroutput"><span class="identifier">m</span></code> an instance of the
            type <a class="link" href="nudb__file_mode.html" title="file_mode">file_mode</a>
          </li>
<li class="listitem">
            <code class="computeroutput"><span class="identifier">ec</span></code> an instance of a reference
            to the type <a class="link" href="nudb__error_code.html" title="error_code">error_code</a>
          </li>
<li class="listitem">
            <code class="computeroutput"><span class="identifier">n</span></code> a number of bytes.
            Type is <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span></code>
          </li>
<li class="listitem">
            'o' an offset from the beginning of a file. Type is <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span></code>
          </li>
<li class="listitem">
            'a' a memory address of type void *
          </li>
</ul></div>
<h5>
<a name="nudb.ref.File.h2"></a>
        <span class="phrase"><a name="nudb.ref.File.file_requirements"></a></span><a class="link" href="File.html#nudb.ref.File.file_requirements">File
        Requirements</a>
      </h5>
<div class="table">
<a name="nudb.ref.File.valid_expressions"></a><p class="title"><b>Table&#160;1.&#160;Valid Expressions</b></p>
<div class="table-contents"><table class="table" summary="Valid Expressions">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                <p>
                  Operation
                </p>
              </th>
<th>
                <p>
                  Return Type
                </p>
              </th>
<th>
                <p>
                  Semantics, Pre/Post-conditions
                </p>
              </th>
</tr></thead>
<tbody>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">F</span><span class="special">()</span></code>
                </p>
              </td>
<td>
              </td>
<td>
                <p>
                  Default constructable
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">F</span><span class="special">(</span><span class="identifier">f</span><span class="special">)</span></code>
                </p>
              </td>
<td>
              </td>
<td>
                <p>
                  Move constructable. Note NOT copy constructable.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">f</span><span class="special">.</span><span class="identifier">is_open</span><span class="special">()</span></code>
                </p>
              </td>
<td>
                <p>
                  <code class="computeroutput"><span class="keyword">bool</span></code>
                </p>
              </td>
<td>
                <p>
                  Returns <code class="computeroutput"><span class="keyword">true</span></code> if <code class="computeroutput"><span class="identifier">f</span></code> refers to an open file, false
                  otherwise.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">f</span><span class="special">.</span><span class="identifier">close</span><span class="special">()</span></code>
                </p>
              </td>
<td>
              </td>
<td>
                <p>
                  If <code class="computeroutput"><span class="identifier">f</span></code> refers to
                  an open file, closes the file. Otherwise, does nothing. After this
                  call, <code class="computeroutput"><span class="identifier">f</span><span class="special">.</span><span class="identifier">is_open</span><span class="special">()</span></code>
                  will return <code class="computeroutput"><span class="keyword">false</span></code>.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">f</span><span class="special">.</span><span class="identifier">create</span><span class="special">(</span><span class="identifier">m</span><span class="special">,</span><span class="identifier">p</span><span class="special">,</span><span class="identifier">ec</span><span class="special">)</span></code>
                </p>
              </td>
<td>
              </td>
<td>
                <p>
                  Attempts to create a file at the path specified by <code class="computeroutput"><span class="identifier">p</span></code>, and open it with the mode
                  specified by <code class="computeroutput"><span class="identifier">m</span></code>.
                  If an error occurs, <code class="computeroutput"><span class="identifier">ec</span></code>
                  is set to the system specific error code. If no error occurs, a
                  subsequent call to <code class="computeroutput"><span class="identifier">f</span><span class="special">.</span><span class="identifier">is_open</span><span class="special">()</span></code> will return <code class="computeroutput"><span class="keyword">true</span></code>.
                  Behavior is undefined if <code class="computeroutput"><span class="identifier">f</span></code>
                  already refers to an open file.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">f</span><span class="special">.</span><span class="identifier">open</span><span class="special">(</span><span class="identifier">m</span><span class="special">,</span><span class="identifier">p</span><span class="special">,</span><span class="identifier">ec</span><span class="special">)</span></code>
                </p>
              </td>
<td>
              </td>
<td>
                <p>
                  Attempts to open the file at the path specified by <code class="computeroutput"><span class="identifier">p</span></code>. If an error occurs, <code class="computeroutput"><span class="identifier">ec</span></code> is set to the system specific
                  error code. If no error occurs, a subsequent call to <code class="computeroutput"><span class="identifier">f</span><span class="special">.</span><span class="identifier">is_open</span><span class="special">()</span></code>
                  will return <code class="computeroutput"><span class="keyword">true</span></code>.
                  Behavior is undefined if <code class="computeroutput"><span class="identifier">f</span></code>
                  already refers to an open file.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">F</span><span class="special">::</span><span class="identifier">erase</span><span class="special">(</span><span class="identifier">p</span><span class="special">,</span><span class="identifier">ec</span><span class="special">)</span></code>
                </p>
              </td>
<td>
              </td>
<td>
                <p>
                  Attempts to delete the file at the path specified by <code class="computeroutput"><span class="identifier">p</span></code>. If an error occurs, <code class="computeroutput"><span class="identifier">ec</span></code> is set to the system specific
                  error code.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">f</span><span class="special">.</span><span class="identifier">size</span><span class="special">(</span><span class="identifier">ec</span><span class="special">)</span></code>
                </p>
              </td>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span></code>
                </p>
              </td>
<td>
                <p>
                  Returns the size of the file in bytes. This value is also equal
                  to lowest byte offset for which a read will always return a <a class="link" href="nudb__error.html" title="error">short_read</a> error. Behavior
                  is undefined if <code class="computeroutput"><span class="identifier">f</span></code>
                  does not refer to an open file.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">f</span><span class="special">.</span><span class="identifier">read</span><span class="special">(</span><span class="identifier">o</span><span class="special">,</span><span class="identifier">a</span><span class="special">,</span><span class="identifier">n</span><span class="special">,</span><span class="identifier">ec</span><span class="special">)</span></code>
                </p>
              </td>
<td>
              </td>
<td>
                <p>
                  Attempts to read <code class="computeroutput"><span class="identifier">n</span></code>
                  bytes starting at file offset <code class="computeroutput"><span class="identifier">o</span></code>
                  from the open file referred to by <code class="computeroutput"><span class="identifier">f</span></code>.
                  Bytes read are stored in the memory buffer at address 'a'. The
                  memory buffer at 'a' must be at least n bytes long. If an error
                  occurs, <code class="computeroutput"><span class="identifier">ec</span></code> is set
                  to the system specific error code. Behavior is undefined if <code class="computeroutput"><span class="identifier">f</span></code> does not refer file opened
                  with <a class="link" href="nudb__file_mode.html" title="file_mode">file_mode</a>
                  equal to scan or read.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">f</span><span class="special">.</span><span class="identifier">sync</span><span class="special">(</span><span class="identifier">ec</span><span class="special">)</span></code>
                </p>
              </td>
<td>
              </td>
<td>
                <p>
                  Attempts to synchronize the file on disk. This instructs the operating
                  system to ensure that any data which resides in caches or buffers
                  is fully written to the underlying storage device before this call
                  returns. If an error occurs, <code class="computeroutput"><span class="identifier">ec</span></code>
                  is set to the system specific error code. Behavior is undefined
                  if <code class="computeroutput"><span class="identifier">f</span></code> does not refer
                  to an open file.
                </p>
                <p>
                  NuDB's database integrity guarantees are only valid if the implementation
                  of <code class="computeroutput"><span class="identifier">sync</span></code> assures
                  that all data is fully written to the underlying file before the
                  call returns.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">f</span><span class="special">.</span><span class="identifier">write</span><span class="special">(</span><span class="identifier">o</span><span class="special">,</span><span class="identifier">a</span><span class="special">,</span><span class="identifier">n</span><span class="special">,</span><span class="identifier">ec</span><span class="special">)</span></code>
                </p>
              </td>
<td>
              </td>
<td>
                <p>
                  Attempts to write <code class="computeroutput"><span class="identifier">n</span></code>
                  bytes starting at file offset <code class="computeroutput"><span class="identifier">o</span></code>
                  to the open file referred to by <code class="computeroutput"><span class="identifier">f</span></code>.
                  The memory buffer at <code class="computeroutput"><span class="identifier">a</span></code>
                  should contain the <code class="computeroutput"><span class="identifier">n</span></code>
                  bytes meant to be copied to the file. If an error occurs, <code class="computeroutput"><span class="identifier">ec</span></code> is set to the system specific
                  error code. Behavior is undefined if <code class="computeroutput"><span class="identifier">f</span></code>
                  does not refer a file opened with <a class="link" href="nudb__file_mode.html" title="file_mode">file_mode</a>
                  equal to write or append.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">f</span><span class="special">.</span><span class="identifier">trunc</span><span class="special">(</span><span class="identifier">o</span><span class="special">,</span><span class="identifier">ec</span><span class="special">)</span></code>
                </p>
              </td>
<td>
              </td>
<td>
                <p>
                  Attempts to change the size of the open file referred to by <code class="computeroutput"><span class="identifier">f</span></code> to the size in bytes specified
                  by <code class="computeroutput"><span class="identifier">o</span></code>. If an error
                  occurs, <code class="computeroutput"><span class="identifier">ec</span></code> is set
                  to the system specific error code. Behavior is undefined if <code class="computeroutput"><span class="identifier">f</span></code> does not refer to an open file.
                  After a successful call, <code class="computeroutput"><span class="identifier">a</span><span class="special">.</span><span class="identifier">size</span><span class="special">(</span><span class="identifier">ec</span><span class="special">)</span></code> will return <code class="computeroutput"><span class="identifier">o</span></code>.
                </p>
                <p>
                  NuDB's database integrity guarantees are only valid if the implementation
                  of <code class="computeroutput"><span class="identifier">trunc</span></code> assures
                  that subsequent calls to <code class="computeroutput"><span class="identifier">size</span></code>
                  will return <code class="computeroutput"><span class="identifier">o</span></code>,
                  even if the program is terminated or the device is taken offline
                  before calling <code class="computeroutput"><span class="identifier">size</span></code>.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">is_File</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;</span></code>
                </p>
              </td>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">true_type</span></code>
                </p>
              </td>
<td>
                <p>
                  An alias for <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">true_type</span></code>
                  for <code class="computeroutput"><span class="identifier">F</span></code>. Otherwise
                  equivalent to <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">false_type</span></code>.
                </p>
              </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><h5>
<a name="nudb.ref.File.h3"></a>
        <span class="phrase"><a name="nudb.ref.File.associated_functions"></a></span><a class="link" href="File.html#nudb.ref.File.associated_functions">Associated
        Functions</a>
      </h5>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
            <a class="link" href="nudb__block_size.html" title="block_size">block_size</a>
          </li>
<li class="listitem">
            <a class="link" href="nudb__erase_file.html" title="erase_file">erase_file</a>
          </li>
</ul></div>
<h5>
<a name="nudb.ref.File.h4"></a>
        <span class="phrase"><a name="nudb.ref.File.models"></a></span><a class="link" href="File.html#nudb.ref.File.models">Models</a>
      </h5>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
            <a class="link" href="nudb__posix_file.html" title="posix_file">posix_file</a>
          </li>
<li class="listitem">
            <a class="link" href="nudb__win32_file.html" title="win32_file">win32_file</a>
          </li>
<li class="listitem">
            <a class="link" href="nudb__native_file.html" title="native_file">native_file</a>
          </li>
</ul></div>
<p>
        native file is just an alias which selects one of the previous two depending
        on the operating system on which the code is compiled.
      </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2015, 2016 Vinnie Falco<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../ref.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../ref.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="Hasher.html"><img src="../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
