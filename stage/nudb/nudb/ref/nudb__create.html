<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>create</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../../index.html" title="NuDB">
<link rel="up" href="../ref.html" title="Reference">
<link rel="prev" href="nudb__block_size.html" title="block_size">
<link rel="next" href="nudb__erase_file.html" title="erase_file">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="NuDB Logo" width="1270" height="80" src="../../images/logo.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="nudb__block_size.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../ref.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="nudb__erase_file.html"><img src="../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="nudb.ref.nudb__create"></a><a class="link" href="nudb__create.html" title="create">create</a>
</h3></div></div></div>
<p>
        <a class="indexterm" name="id976463"></a>
Create a new database.
      </p>
<h5>
<a name="nudb.ref.nudb__create.h0"></a>
        <span class="phrase"><a name="nudb.ref.nudb__create.synopsis"></a></span><a class="link" href="nudb__create.html#nudb.ref.nudb__create.synopsis">Synopsis</a>
      </h5>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span>
    <span class="keyword">class</span> <span class="identifier">Hasher</span><span class="special">,</span>
    <span class="keyword">class</span> <span class="identifier">File</span> <span class="special">=</span> <span class="identifier">native_file</span><span class="special">,</span>
    <span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span>
<span class="keyword">void</span>
<span class="identifier">create</span><span class="special">(</span>
    <span class="identifier">path_type</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">dat_path</span><span class="special">,</span>
    <span class="identifier">path_type</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">key_path</span><span class="special">,</span>
    <span class="identifier">path_type</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">log_path</span><span class="special">,</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">uint64_t</span> <span class="identifier">appnum</span><span class="special">,</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">uint64_t</span> <span class="identifier">salt</span><span class="special">,</span>
    <span class="identifier">nsize_t</span> <span class="identifier">key_size</span><span class="special">,</span>
    <span class="identifier">nsize_t</span> <span class="identifier">blockSize</span><span class="special">,</span>
    <span class="keyword">float</span> <span class="identifier">load_factor</span><span class="special">,</span>
    <span class="identifier">error_code</span><span class="special">&amp;</span> <span class="identifier">ec</span><span class="special">,</span>
    <span class="identifier">Args</span><span class="special">&amp;&amp;...</span> <span class="identifier">args</span><span class="special">);</span>
</pre>
<h5>
<a name="nudb.ref.nudb__create.h1"></a>
        <span class="phrase"><a name="nudb.ref.nudb__create.description"></a></span><a class="link" href="nudb__create.html#nudb.ref.nudb__create.description">Description</a>
      </h5>
<p>
        This function creates a set of new database files with the given parameters.
        The files must not already exist or else an error is returned.
      </p>
<p>
        If an error occurs while the files are being created, the function attempts
        to remove the files before returning.
      </p>
<h5>
<a name="nudb.ref.nudb__create.h2"></a>
        <span class="phrase"><a name="nudb.ref.nudb__create.example"></a></span><a class="link" href="nudb__create.html#nudb.ref.nudb__create.example">Example</a>
      </h5>
<pre class="programlisting"><span class="identifier">error_code</span> <span class="identifier">ec</span><span class="special">;</span>
<span class="identifier">create</span><span class="special">&lt;</span><span class="identifier">xxhasher</span><span class="special">&gt;(</span>
    <span class="string">"db.dat"</span><span class="special">,</span> <span class="string">"db.key"</span><span class="special">,</span> <span class="string">"db.log"</span><span class="special">,</span>
        <span class="number">1</span><span class="special">,</span> <span class="identifier">make_salt</span><span class="special">(),</span> <span class="number">8</span><span class="special">,</span> <span class="number">4096</span><span class="special">,</span> <span class="number">0.5f</span><span class="special">,</span> <span class="identifier">ec</span><span class="special">);</span>
</pre>
<h5>
<a name="nudb.ref.nudb__create.h3"></a>
        <span class="phrase"><a name="nudb.ref.nudb__create.template_parameters"></a></span><a class="link" href="nudb__create.html#nudb.ref.nudb__create.template_parameters">Template
        Parameters</a>
      </h5>
<h5>
<a name="nudb.ref.nudb__create.h4"></a>
        <span class="phrase"><a name="nudb.ref.nudb__create.template_parameters0"></a></span><a class="link" href="nudb__create.html#nudb.ref.nudb__create.template_parameters0">Template
        Parameters</a>
      </h5>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                <p>
                  Type
                </p>
              </th>
<th>
                <p>
                  Description
                </p>
              </th>
</tr></thead>
<tbody>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">Hasher</span></code>
                </p>
              </td>
<td>
                <p>
                  The hash function to use. This type must meet the requirements
                  of Hasher. The same hash function must be used every time the database
                  is opened, or else an error is returned. The provided <span class="red">|6|xxhasher</span>
                  is a suitable general purpose hash function.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">File</span></code>
                </p>
              </td>
<td>
                <p>
                  The type of file to use. Use the default of <span class="red">|9|native_file</span>
                  unless customizing the file behavior.
                </p>
              </td>
</tr>
</tbody>
</table></div>
<h5>
<a name="nudb.ref.nudb__create.h5"></a>
        <span class="phrase"><a name="nudb.ref.nudb__create.parameters"></a></span><a class="link" href="nudb__create.html#nudb.ref.nudb__create.parameters">Parameters</a>
      </h5>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                <p>
                  Name
                </p>
              </th>
<th>
                <p>
                  Description
                </p>
              </th>
</tr></thead>
<tbody>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">dat_path</span></code>
                </p>
              </td>
<td>
                <p>
                  The path to the data file.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">key_path</span></code>
                </p>
              </td>
<td>
                <p>
                  The path to the key file.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">log_path</span></code>
                </p>
              </td>
<td>
                <p>
                  The path to the log file.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">appnum</span></code>
                </p>
              </td>
<td>
                <p>
                  A caller-defined value stored in the file headers. When opening
                  the database, the same value is preserved and returned to the caller.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">salt</span></code>
                </p>
              </td>
<td>
                <p>
                  A random unsigned integer used to permute the hash function to
                  make it unpredictable. The return value of <span class="red">|9|make_salt</span>
                  returns a suitable value.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">key_size</span></code>
                </p>
              </td>
<td>
                <p>
                  The number of bytes in each key.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">blockSize</span></code>
                </p>
              </td>
<td>
                <p>
                  The size of a key file block. Larger blocks hold more keys but
                  require more I/O cycles per operation. The ideal block size the
                  largest size that may be read in a single I/O cycle, and device
                  dependent. The return value of <span class="red">|9|block_size</span>
                  returns a suitable value for the volume of a given path.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">load_factor</span></code>
                </p>
              </td>
<td>
                <p>
                  A number between zero and one representing the average bucket occupancy
                  (number of items). A value of 0.5 is perfect. Lower numbers waste
                  space, and higher numbers produce negligible savings at the cost
                  of increased I/O cycles.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">ec</span></code>
                </p>
              </td>
<td>
                <p>
                  Set to the error, if any occurred.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">args</span></code>
                </p>
              </td>
<td>
                <p>
                  Optional arguments passed to File constructors.
                </p>
              </td>
</tr>
</tbody>
</table></div>
<h5>
<a name="nudb.ref.nudb__create.h6"></a>
        <span class="phrase"><a name="nudb.ref.nudb__create.header"></a></span><a class="link" href="nudb__create.html#nudb.ref.nudb__create.header">Header</a>
      </h5>
<p>
        <code class="computeroutput"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">nudb</span><span class="special">/</span><span class="identifier">create</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code>
      </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2015, 2016 Vinnie Falco<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="nudb__block_size.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../ref.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="nudb__erase_file.html"><img src="../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
